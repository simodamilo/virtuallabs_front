<div class="container">

    <h2>Virtual Machine Model</h2>
    <div class="mat-elevation-z1 insert-vm" *ngIf="showModelView">
        <h3>The Virtual Machine model "{{_modelVm.name}}" is available, the {{_modelVm.type}} type is setted.</h3>
    </div>

    <br>
    <h2>Virtual Machines</h2>
    <div class="fabButton" *ngIf="showAddButton && showModelView">
        <button mat-mini-fab color="primary" aria-label="Add a new Virtual Machine" (click)="addOpenStepper()">
            <mat-icon>add</mat-icon>
        </button>
    </div>
    <br>
    <p class="errorMsg">{{_errorMsg}}</p>
    
    <!-- It is used to add or modify a Virtual Machine -->
    <div class="mat-elevation-z1 insert-vm" *ngIf="showAddDiv">
        <mat-horizontal-stepper linear #stepper>
            <mat-step label="Name">
                <mat-form-field class="name">
                    <mat-label>Name</mat-label>
                    <input matInput [(ngModel)]="vm.name">
                </mat-form-field>
                <div class="stepperButton">
                    <button mat-button (click)="closeStepper()">Close</button>
                    <button mat-button matStepperNext>Next</button>
                </div>
            </mat-step>

            <mat-step label="Config">
                <div>
                    <mat-slider [max]="ram" [(ngModel)]="vm.ram"></mat-slider>
                    <mat-form-field>
                        <mat-label>Ram</mat-label>
                        <input matInput type="number" [max]="ram" [(ngModel)]="vm.ram">
                    </mat-form-field>
                    <p>Max available ram: {{ram}}</p>
                </div>
                <div>
                    <mat-slider [max]="vcpu" [(ngModel)]="vm.vcpu"></mat-slider>
                    <mat-form-field>
                        <mat-label>VCpu</mat-label>
                        <input matInput type="number" [max]="vcpu" [(ngModel)]="vm.vcpu">
                    </mat-form-field>
                    <p>Max available vcpu: {{vcpu}}</p>
                </div>
                <div>
                    <mat-slider [max]="disk" [(ngModel)]="vm.disk"></mat-slider>
                    <mat-form-field>
                        <mat-label>Disk</mat-label>
                        <input matInput type="number" [max]="disk" [(ngModel)]="vm.disk">
                    </mat-form-field>
                    <p>Max available disk: {{disk}}</p>
                </div>
                <div class="stepperButton">
                    <button mat-button matStepperPrevious>Back</button>
                    <button mat-button matStepperNext>Next</button>
                </div>
            </mat-step>

            <mat-step label="Other owners">
                <h3>Add other owners to the virtual machine</h3>
                <mat-form-field class="name">
                    <mat-label>Select</mat-label>
                    <mat-select #matSelect (selectionChange)="addStudent($event)">
                        <mat-option *ngFor="let option of _teamStudents" [value]="option">{{option.name + " " + option.surname}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <div *ngFor="let option of vm.owners" value="option">
                    <button mat-icon-button color="primary" aria-label="Delete student" (click)="removeStudent(option)">
                        <mat-icon>delete</mat-icon>
                    </button>
                    <p>{{option.name + " " + option.surname}}</p>
                </div>
                <div class="stepperButton">
                    <button mat-button matStepperPrevious>Back</button>
                    <button mat-button matStepperNext>Next</button>
                </div>
            </mat-step>

            <mat-step label="Summary">
                <h3>Summary configuration</h3>
                <div>
                    <p>Ram: {{vm.ram}}</p>
                    <p>VCpu: {{vm.vcpu}}</p>
                    <p>Disk: {{vm.disk}}</p>
                </div>
                <h3 *ngIf="vm.owners.length">Other owners</h3>
                <div *ngFor="let option of vm.owners" value="option">
                    <p>{{option.name + " " + option.surname}}</p>
                </div>
                <!-- <p class="error">{{_errorMsg}}</p> -->
                <div class="stepperButton">
                    <button mat-button matStepperPrevious>Back</button>
                    <button mat-button (click)="confirmVm()">Confirm</button>
                </div>
            </mat-step> 
          </mat-horizontal-stepper>
    </div>

    <app-vms-table *ngIf="showAddButton && showModelView"
                [vms]="_vms"
                (onOff)="onOffVm($event)"
                (modify)="modifyOpenStepper($event)"
                (delete)="deleteVm($event)">
    </app-vms-table>
  </div>
